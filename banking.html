<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BUTTON</title>
  <link rel="stylesheet" href="/css/landingbutton.css">
  <link rel="stylesheet" href="font-awesome-4.7.0\css\font-awesome.css">
  <link rel="stylesheet" href="/css/buttonhome.css">
  <link rel="stylesheet" href="/css/banking.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
   


</head>

<body>
    
    <section id="loginheader">
        <div id="container1">
            <div id="user_image">
                
            </div>
            <div id="container3">
                <div id="username">......</div>
                <div class="userid" id="userided">....</div>
                <div id="verificationstatus">
                    verified <i class="fa fa-chevron-circle-down"></i>
                </div>
            </div>
        </div>
    
        <div id="container8">
            BUTTON
        </div>
    
        <div id="container9">
            <div><i class="fa fa-search"></i></div>
            <div class="depositt"><a href="/users/logout">Deposit</a></div>
            <div><i class="fa fa-bell"></i></div>
            <div><i class="fa fa-square-o"></i></div>
            <div><a href="/users/logout">Settings</a></div>
        </div>
    </section>
    <div id="rowwbar" >
        
        <ul class="listedmeni">
          <li><a href="/users/landingbutton">Dashboard</a></li>
          <li>Products</li>
          <li>About</li>
          <li>Customer Service</li>
          <li class="">Governance</li>
        </ul>
    </div>

    <div id="containA">
        <div id="containB">
            <div id="containD">
              <div id="containDTACB">
                <span>Total Asset Checking Balance</span>
                <H2>$ <div id="Tacv">...</div></H2>
              </div>
              <div id="containDpnl">
                <div class="pnlthings"> 
                  <span>Yesterday's PnL percentage</span>
                  <H2>20%</H2>
                </div>
                <div class="pnlthings">
                  <span>Yesterday's PnL ammount</span>
                  <H2>$350</H2>
                </div>
              </div>
            </div>
            <div id="containE">
              <a href=""><div class="sidebarmenu">
                <div class="logomaker"><i class="fa fa-server"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    Transaction History
                  </div>
                  <div class="thing">
                    <h2>></h2>
                  </div>
                </div>
              </div></a>
      
              <a href=""><div class="sidebarmenu">
                <div class="logomaker"><i class="fa fa-bank"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    Account Positions
                  </div>
                  <div class="thing">
                    <h2>></h2>
                  </div>
                </div>
              </div></a>
      
             <a href=""> <div class="sidebarmenu">
                <div class="logomaker"><i class=" fa fa-bolt"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    &nbsp Security Center 
                  </div>
                  <div class="thing">
                    <h2>&nbsp &nbsp   ></h2>
                  </div>
                </div>
              </div></a>
      
              <a href="/users/banking"><div class="sidebarmenu bankss">
                <div class="logomaker"><i class="fa fa-vcard"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    Bank Card/Account
                  </div>
                  <div class="thing">
                    <h2>></h2>
                  </div>
                </div>
              </div></a>
      
              <a href=""><div class="sidebarmenu">
                <div class="logomaker"><i class="fa fa-book"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    Insights and Education
                  </div>
                  <div class="thing">
                    <h2>></h2>
                  </div>
                </div>
              </div></a>
      
              <a href="/users/channels"><div class="sidebarmenu">
                <div class="logomaker"><i class="fa fa-pie-chart"></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                  Channels
                  </div>
                  <div class="thing">
                    <h2>></h2>
                  </div>
                </div>
              </div></a>
      
              <a href=""><div class="sidebarmenu">
                <div class="logomaker"><i class=""></i></div>
                <div class="wordingsthing">
                  <div class="wordings">
                    
                  </div>
                  <div class="thing">
                    <h2></h2>
                  </div>
                </div>
              </div></a>
              
            </div>
            <div id="containF"> 
              <span>Button's instrument are insured by &nbsp<h5>LeventisÂ®</h5>&nbsp bonds.</span>
            </div>
        </div>

        <div id="bankingpage">
            <div id="firstsights">
                <div id="rome">
                    <span><strong>Credit asset in Igbo Banking</strong></span>
                    <h3> $0</h3>
                </div>

                <div id="rome">
                    <span>Cumulative Loan Debt</span>
                    <h3>$0</h3>
                </div>

                <div id="rome">
                    <span>Reserve</span>
                    <h3>$<div id="reservevalue">...</div></h3>
                </div>
                
                
                    
            
            </div>

            <div id="secondsights">
                <div id="rome2">
                    
                    <h3>Deposit</h3>
                </div>

                

                <div id="rome2">
                    
                    <h3>Withdraw</h3>
                </div>

                <div id="rome2" class="transferit">
                    
                    <h3>Transfer to Button</h3>
                </div>

                <div class="wrappercartonItransfer">
                  
                  <div class="cartonItransfer">
                    <div id="failuremessage"></div>
                    <i class="fa fa-close closetransfericon"></i>
                    <form id="transferform" onsubmit="submitTransferForm(event)">
                          <div id="cartonItis">
                              
                              <div  class="cartonItisdiv">
                              <select name="TitleBank" id="banktitle" type="text" required>
                                  <option value="bankoption">Select Destination Bank <i class="fa fa-bank"></i></option>
                                  <option value="Button">Button</option>
                                  <option value="Paypal">Paypal</option>
                                  <option value="Zelle">Zelle</option>
                                  <option value="Flutterwave">Flutterwave</option>
                                  <option value="Skrill">Skrill</option>
                                  <option value="Tutto">Tutto</option>
                                  <option value="EIfinance">EIfinance</option>
                              </select>
                              
                  
                              
                              <div class="inputboxtransfer">
                                  <span class="iconkR">Pay id/email/account no</span>
                                  <input type="text" name="payId" id="payId" placeholder='Pay id/email/account no' required>
                                  
                              </div>
                              </div>
          
                              <div class="cartonItisdiv">
                              <div class="inputboxtransfer">
                                  <span class="iconkR">Amount ($)</span>
                                  <input type="text" name="Amount" id="Amount" placeholder='0.00' required>
                              </div>
                              
                              
                              <div class="inputboxtransfer">
                                  <span class="iconkR">Payment Pin</span>
                                  <input type="password" id="PaymentPin" name="PaymentPin" placeholder='PaymentPin' required>
                                  <label for=""></label>
                              </div>
                              </div>
          
                              
                          
                              
                              
                              
                              
                          
                          
                              </div>
                          
                          <div id="cartonFtransfer">
                          
                          
                  
                              <div class="letterchoice">
                              
                              <h5>The Transaction will be debited from the reserve of your Button Portfolio <br>
                              Easily click on instruments and other portfolio to swap assets to reserve.<br>
                              Having difficulties? <a href="">learn more</a></h5>
                              </div>
                          
                          
                          
                  
                          <button type="submit">Transfer</button>
                          
                              </div>
                  
                          <div id="cartonktransfer" class="transferitnow"><span>BUTTON INC, Leventus Drive, Awka, AF 1001</span></div>
                    </form>
                  </div>
              </div>
                
              <div class="wrappertrxtocon">
                  <div id="trxtocon" class="trxtoconn">
                    
                  </div>
                </div>

                <div id="rome2" >
                    
                    <h3>Transfer to Bank </h3>
                </div>
            </div>

            <div id="heidi">

                <h3>Credit and Loan facilities <i class="fa fa-hourglass-end"></i></h3>

                <div id="tabledi">
                    

                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>


                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>

                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>

                    <div class="fordapps fordappsjsb">
                        <div class="fordapps1">
                            <img src="/LEVENTISJSBTICKER.png" alt=""> <h4></h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>

                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>

                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>

                    <div class="fordapps">
                        <div class="fordapps1">
                            <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                        </div>
                        <h5>this is a joint fund responsible for hedging trade on  button instruments,
                             loan approaval and market confidence</h5>
                    </div>
                </div>
                <div id="rootedi">
                    <div id="tabledi"><h3>Auditory Services</h3>
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps fordappsjsb">
                            <div class="fordapps1">
                                <img src="/LEVENTISJSBTICKER.png" alt=""> <h4></h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
                    </div>
                    <div id="tabledi"><h3>Virtual Credit card <i class="fa fa-credit-card"></i></h3>
                    
                        <div id="creditcard">
                            <div class="creditcardgead">
                                <h2>BUTTON</h2>

                                <span>02/25</span>
                            </div>
                            <div id="creditcardbelow">
                                <h4> 2345 7768 9908</h4>
                                <h5>Virtual Credit Card</h5>
                            </div>
                        </div>

                        <div>
                            <table>
                                <caption>Card Information</caption>
                                <thead>
                                <tr>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <th scope="row">Card Number:</th>
                                    <td>4567 9875 4567 8765</td>
                                </tr>

                                <tr>
                                    <th scope="row">CVV:</th>
                                    <td>675</td>
                                </tr>

                                <tr>
                                    <th scope="row">Expiry date:</th>
                                    <td>02/25</td>
                                </tr>

                                <tr>
                                    <th scope="row"></th>
                                    <td></td>
                                </tr>
                            </tbody>
                            </table>
                        </div>
                    
                    </div>
                </div>
                <div id="rootedi">
                    <div id="tabledi"><h3>Cryptocurrency</h3>
                    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps fordappsjsb">
                            <div class="fordapps1">
                                <img src="/LEVENTISJSBTICKER.png" alt=""> <h4></h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
                    </div>
                    <div id="tabledi"><h3>Savings Services</h3>
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps fordappsjsb">
                            <div class="fordapps1">
                                <img src="/LEVENTISJSBTICKER.png" alt=""> <h4></h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
    
                        <div class="fordapps">
                            <div class="fordapps1">
                                <img src="/S_20240903_151834_0000-removebg-preview.png" alt=""> <h4>Sale and Credit confidence quorum</h4>
                            </div>
                            <h5>this is a joint fund responsible for hedging trade on  button instruments,
                                 loan approaval and market confidence</h5>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>

    <script src="/transferr.js"></script>

    <script>
      function fetchdata(){
        //use key to fetch data
        const key = "req.user.id";
        fetch('/api/data/${key}')
          .then(response =>response.json())
          .then(data =>{
            document.getElementById('username').innerText = data.data1;
            document.getElementById('userided').innerText = data.data2;
          })
          .catch(error =>{
            document.getElementById('username').innerText = data.data1;
            document.getElementById('userided').innerText = data.data2;
            document.getElementById('reservevalue').innerText = fetchfinance.fetchfinancevalue1;
            console.error('Error', error);
          });
      };

      function fetchTacv(){
        const key = 'req.user.id';
        fetch('/api/tacvthings',)
            .then(response =>response.json())
            .then(data =>{
                document.getElementById('Tacv').innerText = data.tacv;
            })
            .catch(error =>{
                document.getElementById('Tacv').innerText = data.tacv;
                console.error('Error', error);
            });
      }
      
    
        function submitTransferForm(event) {
            event.preventDefault();//prevents normalsubmission
            const TitleBank = document.getElementById('banktitle').value;
            const payId = document.getElementById('payId').value;
            const Amount = document.getElementById('Amount').value;
            const PaymentPin = document.getElementById('PaymentPin').value;
            
           
            //send data to the server using fetch (AJAX)
            fetch('/submittransfer',{
                method: 'POST',
                headers: {'content-type':'application/json'},
                body: JSON.stringify({TitleBank, payId, Amount, PaymentPin})
                
            })
            .then(response=>response.json())
            .then(data=>{
                document.getElementById('failuremessage').innerText = data.message;

                if(data.success){
                            let Transferitnow = document.querySelector('.transferitnow');
                            let Trxtocon = document.querySelector('.trxtoconn');
                            let Wrappertrxtocon = document.querySelector('.wrappertrxtocon');
                            
                            
                            Trxtocon.innerHTML=` 
                            
                             <h4>You're about to transfer $ ${data.price} to ${data.person}, do you wish to proceed?</h4>

                            <div id="cancelcontinue">
                                <button id="finalcancell" class="finalcancel">Cancel</button>
                                <button id="actionbutton">Continue</button>
                            </div>
                            `;
                            Trxtocon.classList.add('active');
                            Wrappertrxtocon.classList.add('active');
                            //add an event listener for the dynamically inserted button
                            document.getElementById('actionbutton').addEventListener('click', async function(){
                                await performaction(data.price, data.remail);
                            });
                            
                            document.getElementById('finalcancell').addEventListener('click', async function(){
                                await cancel();
                                location.reload();
                            });
                            
                            
                } 
            })
            .catch(error =>console.error('error:', error))
        }
        
        async function cancel(){
            let Trxtocon = document.querySelector('.trxtoconn');
            let Wrappertrxtocon = document.querySelector('.wrappertrxtocon');
            Trxtocon.classList.remove('active');
            Wrappertrxtocon.classList.remove('active');
        }

        async function performaction(price, remail) {
        try {
            const response = await fetch('/perform-transfer', {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body:JSON.stringify({price, remail})//passing the database result
            });

            const result = await response.json();
            if(result.success){
                let Trxtocon = document.querySelector('.trxtoconn');
                let Wrappertrxtocon = document.querySelector('.wrappertrxtocon');
                
                Trxtocon.innerHTML=` 
                            
                            <h4>Transfer is successfull</h4>

                           <div id="cancelcontinue">
                               <button id="finalcancell" class="finalcancel">OK</button>
                               
                           </div>
                           `;
                           
                           document.getElementById('finalcancell').addEventListener('click', async function(){
                                await cancel();//hide the div
                                location.reload();//refreshes the page
                            });
            } else {
                alert('alert failed, why nah');
            }
        } catch(error){
            console.error('error:', error);
        }
        }
    
    
        function Transferprocess(){
        event.preventDefault();
        //const formdata = new FormData(document.getElementById('transferform'));
        const payId = document.getElementById('payId').value;
        const Amount = document.getElementById('Amount').value;
        console.log(payId);
        console.log(Amount);
        console.log('great are you lord');
        fetch('/finaltransfer', {
            method:'POST',
            body: JSON.stringify({payId,Amount})
        })
        .then(response => response.json())
        .then(data=>{
            if (data.success){
                let Trxtocon = document.querySelector('.trxtoconn');
                let Wrappertrxtocon = document.querySelector('.wrappertrxtocon');
                let WrappercartonItransfer = document.querySelector('.wrappercartonItransfer');
                const cartonItransfer = document.querySelector('.cartonItransfer');
                
                Trxtocon.classList.remove('active');
                Wrappertrxtocon.classList.remove('active');
                WrappercartonItransfer.classList.remove('active');
                cartonItransfer.classList.remove('active');
                alert('Transaction processed successfully')
            } else{
                alert('The transaction failed')
            }
        })
        .catch(error =>console.error('error:', error));
    }
    
        function fetchfinances(){
    //use key to fetch data
    const key = "req.user.id";
    fetch('/api/fetchfinance')
      .then(response =>response.json())
      .then(data=>{
        console.log('rammer')
        console.log(data.fetchfinancevalue1);
        document.getElementById('reservevalue').innerText = data.fetchfinancevalue1;
        //document.getElementById('userided').innerText = data.data2;
        
      })
      .catch(error =>{
        document.getElementById('reservevalue').innerText = data.fetchfinancevalue1;
       // document.getElementById('userided').innerText = data.data2;
        console.error('Error', error);
      });
  }

  

  window.onload= function(){
    fetchfinances();
    fetchdata();
    fetchTacv();
  };
    </script>
    
</body>